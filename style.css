/* Estilos personalizados */
body {
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
}

/* MODIFICAÇÃO: Efeito hover agora só aplica em dispositivos com mouse (@media (hover: hover)) */
@media (hover: hover) {
    /* Efeito hover para o círculo e a letra (APENAS se não respondida E não selecionada) */
    .option-item:not(.is-answered):not(.selected):hover .option-circle {
        border-color: #3b82f6; /* Azul */
    }
    .option-item:not(.is-answered):not(.selected):hover .option-circle .option-letter {
        color: #3b82f6; /* Azul */
    }
}

/* Estilos para o círculo de seleção */
.selected .option-circle {
    border-color: #3b82f6; /* Azul */
    background-color: #3b82f6; /* Fundo azul quando selecionado */
}
.selected .option-circle .option-letter {
    color: white; /* Letra branca quando selecionado */
}

/* Estilo para a resposta correta */
.correct-answer .option-circle {
    border-color: #22c55e; /* Verde */
    background-color: #dcfce7; /* green-100 */
}
.correct-answer .option-circle .option-letter {
    color: #16a34a; /* green-700 */
}
.correct-answer .option-text {
    color: #16a34a; /* Verde escuro */
    font-weight: 500;
}

/* Estilo para a resposta incorreta selecionada */
.incorrect-answer .option-circle {
    border-color: #ef4444; /* Vermelho */
    background-color: #fee2e2; /* red-100 */
}
.incorrect-answer .option-circle .option-letter {
    color: #b91c1c; /* red-700 */
}
.incorrect-answer .option-text {
    color: #dc2626; /* Vermelho escuro */
    font-weight: 500;
}

/* Estilo para a opção descartada */
.discarded .option-text {
    text-decoration: line-through;
    color: #9ca3af; /* gray-400 */
}
.discarded .option-circle {
    opacity: 0.4;
}
.discarded .discard-btn {
    opacity: 0.4 !important; /* Força a opacidade mesmo no hover */
}

/* Estilos para botões de filtro toggle */
.filter-btn-toggle {
    background-color: #f3f4f6; /* gray-100 */
    color: #4b5563; /* gray-600 */
    border-color: #e5e7eb; /* gray-200 */
}
.filter-btn-toggle:hover {
    background-color: #e5e7eb; /* gray-200 */
}
.filter-btn-toggle.active-filter {
    background-color: #e0e7ff; /* indigo-100 */
    color: #3730a3; /* indigo-800 */
    border-color: #a5b4fc; /* indigo-300 */
    font-weight: 500;
}

/* Estilos para abas */
.tab-button {
    padding: 0.75rem 1rem;
    font-weight: 500;
    border-radius: 0.5rem 0.5rem 0 0;
    background-color: #f3f4f6;
    color: #4b5563;
}
.tab-button.active {
    background-color: #f9fafb; /* bg-gray-50 */
    color: #3b82f6;
}

/* Estilo para destacar questão já existente no caderno */
.already-in-caderno {
    background-color: #eff6ff; /* blue-50 */
    border-left: 4px solid #3b82f6; /* blue-500 */
}

/* NOVOS Estilos para o filtro de árvore de Assuntos */
.assunto-toggle.rotate-90 {
    transform: rotate(90deg);
}

.sub-assunto-list {
    border-left: 1px solid #e5e7eb; /* gray-200 */
    margin-left: 0.75rem; 
}

/* --- MODIFICAÇÃO: Adicionada classe para sub-sub-lista --- */
.sub-sub-assunto-list {
    border-left: 1px solid #e5e7eb; /* gray-200 */
    margin-left: 0.75rem; /* ml-3 */
}
/* --- FIM DA MODIFICAÇÃO --- */


/* Media query for smaller screens */
@media (max-width: 768px) {
    .toolbar-text {
        display: none;
    }

    /* Target all buttons inside the toolbar for consistency */
    #question-toolbar .toolbar-btn i {
        margin-right: 0;
    }
    
    #question-toolbar {
        width: 100%; /* Garante que a barra de ferramentas ocupe toda a largura */
        gap: 0.5rem;
        justify-content: space-between; /* Justifica os ícones */
        flex-wrap: wrap; /* Allow wrapping if needed */
    }
    
    #question-toolbar .toolbar-btn {
         padding: 0.5rem;
    }

    /* Reduce font size for question text */
    #questions-container p.text-lg {
        font-size: 1rem; /* text-base */
        line-height: 1.5rem;
    }
    
    .option-text {
        font-size: 0.9rem; /* Slightly smaller */
    }

    #question-info-container {
         font-size: 0.8rem;
    }
}

/* MODIFICADO: Estilos de Header/Nav antigos removidos */
/* #main-nav .nav-link, #mobile-menu .nav-link { ... } */
/* #main-nav .nav-link::after { ... } */
/* etc... */


/* === NOVOS ESTILOS PARA SIDEBAR === */
#main-nav .nav-link {
    position: relative;
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Indicador ativo para Sidebar (borda esquerda) */
#main-nav .nav-link.active-nav {
    background-color: #374151; /* gray-700 */
    color: white;
}

#main-nav .nav-link.active-nav::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    background-color: #3b82f6; /* blue-500 */
    border-radius: 0 4px 4px 0;
}

/* Classes para colapsar (controladas por JS) */
body.sidebar-collapsed #sidebar-nav {
    transform: translateX(-100%);
}

body.sidebar-collapsed #main-content-wrapper {
    margin-left: 0;
}

/* Ajustes para mobile: a sidebar colapsa e o conteúdo toma a tela toda */
@media (max-width: 767px) { /* Alterado para 767px (abaixo de 'md') */
    #sidebar-nav {
        transform: translateX(-100%);
    }
    #main-content-wrapper {
        margin-left: 0;
    }
    
    /* Quando a sidebar é aberta no mobile, ela fica *sobre* o conteúdo */
    body.sidebar-open-mobile #sidebar-nav {
        transform: translateX(0);
        z-index: 50; /* Sobrepõe tudo */
    }
    
    /* Opcional: Adicionar um overlay escuro sobre o conteúdo */
    body.sidebar-open-mobile #main-content-wrapper::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 45; /* Abaixo da sidebar */
        width: 100vw;
        height: 100vh;
    }
}
/* === FIM DOS ESTILOS DA SIDEBAR === */


/* === NOVOS ESTILOS PARA BOTÕES SRS === */
.srs-feedback-btn {
    font-weight: 600; /* semibold */
    padding: 0.5rem 0.5rem;
    border-radius: 0.5rem; /* rounded-lg */
    transition: background-color 0.2s;
    line-height: 1.2;
}
.srs-feedback-btn .font-normal {
    font-size: 0.75rem; /* text-xs */
    font-weight: 400;
}

.srs-btn-again {
    background-color: #fee2e2; /* red-100 */
    color: #b91c1c; /* red-700 */
}
.srs-btn-again:hover {
    background-color: #fecaca; /* red-200 */
}

.srs-btn-hard {
    background-color: #fef3c7; /* amber-100 */
    color: #b45309; /* amber-700 */
}
.srs-btn-hard:hover {
    background-color: #fde68a; /* amber-200 */
}

.srs-btn-good {
    background-color: #dcfce7; /* green-100 */
    color: #15803d; /* green-700 */
}
.srs-btn-good:hover {
    background-color: #bbf7d0; /* green-200 */
}

.srs-btn-easy {
    background-color: #dbeafe; /* blue-100 */
    color: #1d4ed8; /* blue-700 */
}
.srs-btn-easy:hover {
    background-color: #bfdbfe; /* blue-200 */
}

/* === NOVOS ESTILOS PARA TABELA DE DESEMPENHO (stats-view) === */
.tree-table .tree-table-row:not(.header-row):hover {
    background-color: #f9fafb; /* gray-50 */
}

.tree-table .tree-table-cell {
    padding: 0.75rem 1rem; /* py-3 px-4 */
    vertical-align: middle;
}

.tree-table .toggle-icon {
    width: 1rem; /* w-4 */
    margin-right: 0.5rem; /* mr-2 */
    cursor: pointer;
    transition: transform 0.2s ease-in-out;
    color: #9ca3af; /* gray-400 */
}

.tree-table .toggle-icon.no-children {
    color: transparent; /* Esconde o ícone se não houver filhos */
    cursor: default;
}

.tree-table .toggle-icon.rotate-90 {
    transform: rotate(90deg);
}

/* --- MODIFICAÇÃO: Classes de indentação movidas para stats.js (inline <style>) --- */
/* Removido daqui para evitar duplicação, já que stats.js injeta o <style> */

.tree-table .checkbox-cell { width: 3rem; padding-left: 1rem; padding-right: 0.5rem;}


.tree-table .performance-bar-bg {
    background-color: #ef4444; /* red-500 */
    border-radius: 0.375rem; /* rounded-md */
    overflow: hidden;
    height: 1.25rem; /* h-5 */
    width: 12rem; /* w-48 */
}

.tree-table .performance-bar {
    background-color: #22c55e; /* green-500 */
    height: 1.25rem; /* h-5 */
}

.tree-table .hidden-row {
    display: none;
}

.tree-table .selected-row {
    background-color: #eff6ff; /* blue-50 */
}

/* Rodapé de Seleção da Tabela de Stats */
#stats-selection-footer {
    position: sticky;
    bottom: 0;
    background-color: #f9fafb; /* gray-50 */
    border-top: 2px solid #e5e7eb; /* gray-200 */
    padding: 0.75rem 1rem; /* py-3 px-4 */
    box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.05);
    z-index: 10;
    margin-top: -1px; /* Para sobrepor a borda inferior da tabela */
    border-radius: 0 0 0.5rem 0.5rem; /* rounded-b-lg */
}

/* --- NOVO: Z-index para o dropdown do caderno --- */
.caderno-menu-dropdown {
    z-index: 20; 
}

/* --- NOVO: Estilos para truncar texto (caso o Tailwind não esteja processando) --- */
.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* --- NOVO: Estilos para Dropdown de Período --- */
.period-dropdown-panel {
    max-height: 300px;
    /* overflow-y: auto; MODIFICADO: Removido para permitir flexbox */
}

.period-option-item {
    padding: 0.5rem 1rem; /* 8px 16px */
    cursor: pointer;
    font-size: 0.875rem; /* 14px */
    color: #374151; /* gray-700 */
}

.period-option-item:hover {
    background-color: #f3f4f6; /* gray-100 */
}

.period-option-item.active {
    background-color: #3b82f6; /* blue-500 */
    color: white;
    font-weight: 500;
}
/* --- FIM NOVO --- */

/* ===== INÍCIO DA MODIFICAÇÃO: Fonte das Questões e Alternativas ===== */

/* Estilo para o texto da questão */
#questions-container p.text-lg {
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
    font-style: normal;
    font-weight: 400;
    color: rgb(51, 51, 51); /* #333333 */
    font-size: 18px;
    line-height: 28px;
}

/* Estilo para o texto da alternativa */
.option-text {
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
    font-style: normal;
    font-weight: 400;
    color: rgb(51, 51, 51); /* #333333 */
    font-size: 18px;
    line-height: 28px;
}

/* Sobrescreve a cor da alternativa correta/incorreta, mantendo a fonte */
.correct-answer .option-text {
    /* Mantém as cores originais de feedback */
    color: #16a34a; 
    font-weight: 500;
    /* Aplica o resto da fonte */
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
    font-size: 18px;
    line-height: 28px;
}

.incorrect-answer .option-text {
    /* Mantém as cores originais de feedback */
    color: #dc2626;
    font-weight: 500;
    /* Aplica o resto da fonte */
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
    font-size: 18px;
    line-height: 28px;
}

/* Ajuste para telas pequenas (sobrescreve a regra anterior) */
@media (max-width: 768px) {
    /* O texto da questão já é tratado pelo seletor principal */
    #questions-container p.text-lg {
         font-size: 18px; /* Mantém 18px */
         line-height: 28px;
    }
    
    .option-text {
        font-size: 18px; /* Mantém 18px */
    }
}
/* ===== FIM DA MODIFICAÇÃO ===== */

/* ===== INÍCIO DA MODIFICAÇÃO: Fonte das Pastas e Matérias ===== */

/*
  Aplica-se aos títulos das Pastas na aba "Cadernos"
  e aos títulos das Matérias na aba "Matérias".
*/
#cadernos-view .folder-item .font-bold.text-lg,
#materias-view .materia-item .font-bold.text-lg {
    font-family: "Source Sans Pro", "Trebuchet MS", Tahoma, sans-serif;
    font-weight: 700; /* Corrigido: font-weight deve ser numérico ou 'bold' */
}

/* === NOVOS ESTILOS PARA TOGGLE DA SIDEBAR (FUNDO TRANSPARENTE) === */

/* Em telas mobile, quando o menu está aberto */
body.sidebar-open-mobile #sidebar-toggle-btn {
    background-color: transparent;
    color: #6b7280; /* text-gray-500 (para ver no fundo claro do overlay) */
    box-shadow: none;
}
body.sidebar-open-mobile #sidebar-toggle-btn:hover {
    background-color: rgba(243, 244, 246, 0.5); /* gray-100 com opacidade */
}

/* Em telas de desktop (md) e maiores */
@media (min-width: 768px) {
    /* Quando o menu está ABERTO (body NÃO tem .sidebar-collapsed) */
    body:not(.sidebar-collapsed) #sidebar-toggle-btn {
        background-color: transparent;
        color: #D1D5DB; /* text-gray-300 (para ver no fundo escuro do menu) */
        box-shadow: none;
    }
    body:not(.sidebar-collapsed) #sidebar-toggle-btn:hover {
        background-color: rgba(75, 85, 99, 0.5); /* gray-600 com opacidade */
        color: white;
    }
}
/* === FIM DA MODIFICAÇÃO === */


